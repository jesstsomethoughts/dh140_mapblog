[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "mapblog",
    "section": "",
    "text": "Post With Code\n\n\n\n\n\n\n\nnews\n\n\ncode\n\n\nanalysis\n\n\n\n\n\n\n\n\n\n\n\nMar 20, 2023\n\n\nHarlow Malloc\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nOverall SVI Score and 4 Themed Indicators Blog Page\n\n\n\n\n\nMap Visualizations of Overall SVI Score and 4 Themed Indicators in CA Counties\n\n\n\n\n\n\nMar 19, 2023\n\n\nJessica Li\n\n\n\n\n\n\n  \n\n\n\n\nWelcome To My Blog\n\n\n\n\n\n\n\nnews\n\n\n\n\n\n\n\n\n\n\n\nMar 17, 2023\n\n\nTristan O’Malley\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "posts/post-with-code/index.html",
    "href": "posts/post-with-code/index.html",
    "title": "Post With Code",
    "section": "",
    "text": "This is a post with executable code."
  },
  {
    "objectID": "posts/welcome/index.html",
    "href": "posts/welcome/index.html",
    "title": "Welcome To My Blog",
    "section": "",
    "text": "This is the first post in a Quarto blog. Welcome!\n\nSince this post doesn’t specify an explicit image, the first image in the post will be used in the listing page of posts."
  },
  {
    "objectID": "posts/map1.html",
    "href": "posts/map1.html",
    "title": "Overall SVI Score and 4 Themed Indicators Blog Page",
    "section": "",
    "text": "Overall SVI Score vs. Index Score for its 4 Themed Indicators in CA Counties\nSince this map takes up a lot of memory, I decided to include the code for it and run the outputs on this separate file. Scroll all the way down to see the resulting map.\n\n\nCode\n# First, import necessary library packages\nimport pandas as pd\nimport geopandas as gpd\nimport folium\nfrom folium.features import GeoJsonTooltip\n\n\n\n\nCode\n# Next, import my dataset\nsvi_counties = pd.read_csv('California_COUNTY.csv')  # SVI variables and index scores for all California counties\n\n\n\n\nCode\n# Filter for minority-related variables, SPL_THEMES, and RPL_THEMES (indicator category values and overall index scores)\nscounties_min = svi_counties[['FIPS', 'COUNTY', 'E_MINRTY', 'M_MINRTY', 'EP_MINRTY', 'EPL_MINRTY', 'F_MINRTY', 'F_THEME3', 'SPL_THEME1', 'RPL_THEME1', 'SPL_THEME2', 'RPL_THEME2', 'SPL_THEME3', 'RPL_THEME3', 'SPL_THEME4', 'RPL_THEME4', 'SPL_THEMES', 'RPL_THEMES']]\n\n\n\n\nCode\n# Filter for null values\nscounties_min = scounties_min[(scounties_min['RPL_THEMES'] != -999)]\n\n\n\n\nCode\n# Import geoJSONs to visualize the results on a folium map\ncounties_map = gpd.read_file('acs2021_5yr_ca_counties.json')\n\n\nERROR 1: PROJ: proj_create_from_database: Open of /opt/conda/share/proj failed\n\n\n\n\nCode\n# first reformat geoid so that it corresponds to SVI data \ncounties_map['FIPS'] = counties_map['geoid'].str[-5:]\ncounties_map.at[0, 'FIPS']  = '06'\ncounties_map['FIPS']=counties_map['FIPS'].astype(int)\n\n\n\n\nCode\n# create merged file of geoJSON and SVI data\nmerged_counties_map = pd.merge(counties_map, scounties_min, on='FIPS')\n\n\n\n\nCode\n# Create folium map centered in California\nca_counties_map = folium.Map(location=[37.5, -118], zoom_start=6,tiles=None, overlay=False)\n\n\n\n\nCode\n# set color scale\ncustom_scale = (merged_counties_map['RPL_THEMES'].quantile((0,0.2,0.4,0.6,0.8,1))).tolist()\n\n\n\n\nCode\n# define layers for folium map\nfg1 = folium.FeatureGroup(name='Overall SVI Score', overlay=False).add_to(ca_counties_map)\nfg2 = folium.FeatureGroup(name='Vulnerability Based On Socioeconomic Status',overlay=False).add_to(ca_counties_map)\nfg3 = folium.FeatureGroup(name='Vulnerability Based On Household Characteristics',overlay=False).add_to(ca_counties_map)\nfg4 = folium.FeatureGroup(name='Vulnerability Based on Racial & Ethnic Minority Status',overlay=False).add_to(ca_counties_map)\nfg5 = folium.FeatureGroup(name='Vulnerability Based On Housing Type & Transportation',overlay=False).add_to(ca_counties_map)\n\n\n\n\nCode\n# add to first layer overall SVI score\nsvi_score = folium.Choropleth(\n            geo_data=merged_counties_map,\n            data=merged_counties_map,\n            columns=['FIPS', 'RPL_THEMES'],  # Get the county FIPS and plot the SVI index score (RPL_THEMES) for each county\n            key_on='feature.properties.FIPS', # Get geo boundaries from FIPS column index\n            threshold_scale=custom_scale, # Custom scale for legend\n            fill_color='YlOrRd',\n            nan_fill_color=\"White\", # Use white if there is no data available for the county\n            fill_opacity=0.7,\n            line_opacity=0.2,\n            legend_name='SVI Index Score', \n            highlight=True,\n            overlay=False,\n            line_color='black').geojson.add_to(fg1) \n\n# add tooltip\nfolium.features.GeoJson(\n                    data=merged_counties_map,\n                    name='2020 CDC SVI Scores Across California Counties',\n                    smooth_factor=2,\n                    style_function=lambda x: {'color':'black','fillColor':'transparent','weight':0.5},\n                    tooltip=folium.features.GeoJsonTooltip(\n                        fields=['COUNTY',\n                                'RPL_THEMES',\n                               ],\n                        aliases=[\"County Name:\",\n                                 \"Overall SVI Score:\",\n                                ], \n                        localize=True,\n                        sticky=False,\n                        labels=True,\n                        style=\"\"\"\n                            background-color: #F0EFEF;\n                            border: 2px solid black;\n                            border-radius: 3px;\n                            box-shadow: 3px;\n                        \"\"\",\n                        max_width=800,),\n                            highlight_function=lambda x: {'weight':3,'fillColor':'grey'},\n                        ).add_to(svi_score)  \n\n\n<folium.features.GeoJson at 0x7f1f575c2f80>\n\n\nRepeat the same procedure for the first layer for the other 4 indicators of the SVI score.\n\n\nCode\nrpl1 = folium.Choropleth(\n            geo_data=merged_counties_map,\n            data=merged_counties_map,\n            columns=['FIPS', 'RPL_THEME1'],  \n            key_on='feature.properties.FIPS', \n            threshold_scale=custom_scale, \n            fill_color='YlOrRd',\n            nan_fill_color=\"White\", \n            fill_opacity=0.7,\n            line_opacity=0.2,\n            legend_name='SVI Index Score', \n            highlight=True,\n            overlay=False,\n            line_color='black').geojson.add_to(fg2) \n\nfolium.features.GeoJson(\n                    data=merged_counties_map,\n                    name='2020 CDC SVI Scores Across California Counties',\n                    smooth_factor=2,\n                    style_function=lambda x: {'color':'black','fillColor':'transparent','weight':0.5},\n                    tooltip=folium.features.GeoJsonTooltip(\n                        fields=['COUNTY',\n                                'RPL_THEME1',\n                               ],\n                        aliases=[\"County Name:\",\n                                 \"Socioeconomic Status Index Score:\",\n                                ], \n                        localize=True,\n                        sticky=False,\n                        labels=True,\n                        style=\"\"\"\n                            background-color: #F0EFEF;\n                            border: 2px solid black;\n                            border-radius: 3px;\n                            box-shadow: 3px;\n                        \"\"\",\n                        max_width=800,),\n                            highlight_function=lambda x: {'weight':3,'fillColor':'grey'},\n                        ).add_to(rpl1)  \n\n\n<folium.features.GeoJson at 0x7f1f503d4c40>\n\n\n\n\nCode\nrpl2 = folium.Choropleth(\n            geo_data=merged_counties_map,\n            data=merged_counties_map,\n            columns=['FIPS', 'RPL_THEME2'],  \n            key_on='feature.properties.FIPS', \n            threshold_scale=custom_scale, \n            fill_color='YlOrRd',\n            nan_fill_color=\"White\",\n            fill_opacity=0.7,\n            line_opacity=0.2,\n            legend_name='SVI Index Score', \n            highlight=True,\n            overlay=False,\n            line_color='black').geojson.add_to(fg3) \n\nfolium.features.GeoJson(\n                    data=merged_counties_map,\n                    name='2020 CDC SVI Scores Across California Counties',\n                    smooth_factor=2,\n                    style_function=lambda x: {'color':'black','fillColor':'transparent','weight':0.5},\n                    tooltip=folium.features.GeoJsonTooltip(\n                        fields=['COUNTY',\n                                'RPL_THEME2',\n                               ],\n                        aliases=[\"County Name:\",\n                                 \"Household Characteristics Index Score:\",\n                                ], \n                        localize=True,\n                        sticky=False,\n                        labels=True,\n                        style=\"\"\"\n                            background-color: #F0EFEF;\n                            border: 2px solid black;\n                            border-radius: 3px;\n                            box-shadow: 3px;\n                        \"\"\",\n                        max_width=800,),\n                            highlight_function=lambda x: {'weight':3,'fillColor':'grey'},\n                        ).add_to(rpl2)  \n\n\n<folium.features.GeoJson at 0x7f1fa2c176d0>\n\n\n\n\nCode\nrpl3 = folium.Choropleth(\n            geo_data=merged_counties_map,\n            data=merged_counties_map,\n            columns=['FIPS', 'RPL_THEME3'],  \n            key_on='feature.properties.FIPS', \n            threshold_scale=custom_scale,\n            fill_color='YlOrRd',\n            nan_fill_color=\"White\", \n            fill_opacity=0.7,\n            line_opacity=0.2,\n            legend_name='SVI Index Score', \n            highlight=True,\n            overlay=False,\n            line_color='black').geojson.add_to(fg4) \n\nfolium.features.GeoJson(\n                    data=merged_counties_map,\n                    name='2020 CDC SVI Scores Across California Counties',\n                    smooth_factor=2,\n                    style_function=lambda x: {'color':'black','fillColor':'transparent','weight':0.5},\n                    tooltip=folium.features.GeoJsonTooltip(\n                        fields=['COUNTY',\n                                'RPL_THEME3',\n                               ],\n                        aliases=[\"County Name:\",\n                                 \"Racial & Ethnic Minority Status Index Score:\",\n                                ], \n                        localize=True,\n                        sticky=False,\n                        labels=True,\n                        style=\"\"\"\n                            background-color: #F0EFEF;\n                            border: 2px solid black;\n                            border-radius: 3px;\n                            box-shadow: 3px;\n                        \"\"\",\n                        max_width=800,),\n                            highlight_function=lambda x: {'weight':3,'fillColor':'grey'},\n                        ).add_to(rpl3)  \n\n\n<folium.features.GeoJson at 0x7f1fa024bb50>\n\n\n\n\nCode\nrpl4 = folium.Choropleth(\n            geo_data=merged_counties_map,\n            data=merged_counties_map,\n            columns=['FIPS', 'RPL_THEME4'],  \n            key_on='feature.properties.FIPS',\n            threshold_scale=custom_scale, \n            fill_color='YlOrRd',\n            nan_fill_color=\"White\", \n            fill_opacity=0.7,\n            line_opacity=0.2,\n            legend_name='SVI Index Score', \n            highlight=True,\n            overlay=False,\n            line_color='black').geojson.add_to(fg5) \n\nfolium.features.GeoJson(\n                    data=merged_counties_map,\n                    name='2020 CDC SVI Scores Across California Counties',\n                    smooth_factor=2,\n                    style_function=lambda x: {'color':'black','fillColor':'transparent','weight':0.5},\n                    tooltip=folium.features.GeoJsonTooltip(\n                        fields=['COUNTY',\n                                'RPL_THEME4',\n                               ],\n                        aliases=[\"County Name:\",\n                                 \"Housing Type & Transportation Index Score:\",\n                                ], \n                        localize=True,\n                        sticky=False,\n                        labels=True,\n                        style=\"\"\"\n                            background-color: #F0EFEF;\n                            border: 2px solid black;\n                            border-radius: 3px;\n                            box-shadow: 3px;\n                        \"\"\",\n                        max_width=800,),\n                            highlight_function=lambda x: {'weight':3,'fillColor':'grey'},\n                        ).add_to(rpl4)  \n\n\n<folium.features.GeoJson at 0x7f1f503d6740>\n\n\nAfter adding on all the map layers, I will add a legend to the overall map.\n\n\nCode\nfolium.Choropleth(\n    geo_data=merged_counties_map,\n    data=merged_counties_map,\n    columns=['FIPS', 'RPL_THEMES'],  \n    key_on='feature.properties.FIPS', \n    threshold_scale=custom_scale,\n    fill_color='YlOrRd',\n    nan_fill_color=\"White\", \n    fill_opacity=0.7,\n    line_opacity=0.2,\n    legend_name='SVI Index Score', \n    highlight=True,\n    overlay=False,\n    control=False,\n    line_color='black').add_to(ca_counties_map)\n\n\n<folium.features.Choropleth at 0x7f1f575c0160>\n\n\nTotally just for aesthetic purposes, but I will add another overlay of the map in light and dark mode to provide a better background. Light mode does override dark mode, so it must be unchecked in order to view dark mode. Unchecking both options in the layers control will set the map to have no background.\n\n\nCode\nfolium.TileLayer('cartodbdark_matter',overlay=True,name=\"View in Dark Mode\").add_to(ca_counties_map)\nfolium.TileLayer('cartodbpositron',overlay=True,name=\"View in Light Mode\").add_to(ca_counties_map)\n\n\n<folium.raster_layers.TileLayer at 0x7f1f575c0100>\n\n\n\n\nCode\nfolium.LayerControl(collapsed=False).add_to(ca_counties_map)\n\n\n<folium.map.LayerControl at 0x7f1f503d4400>\n\n\nNow that I added LayerControl, I can now generate my map!\n\n\nMap of Overall SVI Score Compared to its 4 Indicators in CA Counties\nDisclaimer: There’s a small bug with Folium where you can’t access the tooltip for the first layer (‘Overall SVI Score’) unless you click on another layer and click back on it!\n\n\nCode\nca_counties_map\n\n\n\nMake this Notebook Trusted to load map: File -> Trust Notebook"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "About this blog"
  }
]